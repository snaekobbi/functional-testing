<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.daisy.org/ns/xprocspec"
               xmlns:pxi="http://www.daisy.org/ns/pipeline/xproc/internal"
               xmlns:p="http://www.w3.org/ns/xproc"
               xmlns:px="http://www.daisy.org/ns/pipeline/xproc"
               xmlns:pef="http://www.daisy.org/ns/2008/pef"
               xmlns:dotify="http://code.google.com/p/dotify/"
               xmlns:css="http://www.daisy.org/ns/pipeline/braille-css">
  
  <x:script>
    <p:declare-step type="pxi:translate" version="1.0">
      <p:input port="source"/>
      <p:output port="result"/>
      <p:option name="stylesheet" required="true"/>
      <p:import href="http://www.daisy.org/pipeline/modules/braille/dotify-formatter/library.xpl"/>
      <p:import href="http://www.daisy.org/pipeline/modules/braille/css-calabash/library.xpl"/>
      <p:import href="http://www.daisy.org/pipeline/modules/braille/common-utils/library.xpl"/>
      <css:inline>
        <p:with-option name="default-stylesheet" select="resolve-uri($stylesheet)"/>
      </css:inline>
      <px:transform type="css-block" query=""/>
      <dotify:format/>
    </p:declare-step>
  </x:script>
  
  <x:scenario id="106.1" label="Rendering print page breaks as marks in the left margin">
    <x:call step="pxi:translate">
      <x:input port="source">
        <x:document type="file" href="../../resources/original-pagination/Test.DTBook.Indication of original pagination.xml"/>
      </x:input>
      <x:option name="stylesheet" select="'style.css'"/>
    </x:call>
    <x:context label="result">
      <x:document type="port" port="result"/>
    </x:context>
    <x:expect label="result" type="custom" href="http://www.daisy.org/pipeline/modules/braille/pef-utils/library.xpl" step="x:pef-compare">
      <x:document type="file" href="../../resources/original-pagination/Test.PEF.Indication of original pagination.pef"/>
    </x:expect>
  </x:scenario>
  
  <x:scenario id="106.2" label="Rendering print page breaks as marks in the left margin. The mark is taken out of the normal text flow, and appears at the same line as the word that comes after the pagenum tag.">
    <x:call step="pxi:translate">
      <x:input port="source">
        <x:document type="file" href="../../resources/original-pagination/Test.DTBook.Indication-of-original-pagination2.xml"/>
      </x:input>
      <x:option name="stylesheet" select="'style.css'"/>
    </x:call>
    <x:context label="result">
      <x:document type="port" port="result"/>
    </x:context>
    <x:expect label="result" type="custom" href="http://www.daisy.org/pipeline/modules/braille/pef-utils/library.xpl" step="x:pef-compare">
      <x:document type="file" href="../../resources/original-pagination/Test.PEF.Indication-of-original-pagination.2.pef"/>
    </x:expect>
  </x:scenario>
  
</x:description>
